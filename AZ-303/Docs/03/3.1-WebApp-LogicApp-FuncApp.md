## 3.1 Implement Application Infrastructure: 

### 3.1.1. Create and configure Azure App Service

* Azure Web App Service, is the service, where we can publish our Web Application.
* Based on the Webapp Plan selected, we can chose the underlying VM/Infra for hosting the Web application.
  * .Net core --> Windows/Linux VMs | ASP .Net --> Only on Windows
* Locally developed webapp code can be published to the Webapp Service created.
* 


### 3.1.2. Create an App Service Web App for Containers


### 3.1.3. Create and configure an App Service plan

* App Service Plans : Windows/Linux, Depends on the type of Webapp.
* Also It will be hosted on the same Region as Webapp Service

#### SKUs:

* Dev/Test- B1/B2/B3: 
  * `Manual Scale (3 instances)`
  * `Custom Domain/SSL`
  * `10GB Disk storage`
* Production P1V2/P1V3/P2V2/P2V3/P3V2/P3v3:
  * `Auto-scale (upto 20)`
  * `Staging Slots`
  * `Daily Backup`
  * `Azure Traefik Manager`
* Isolated (Networking & Scale):
  * `Private App Access`
  * `Scale to 100 instances`
  * `Isolated Network Access`
  * `Single Tenant resource access`

> **Note:** 
  * App Service on Linux is supported only with Free, Basic, Standard, Premium, and Isolated app service plans and does `not support` `Shared tier`. You cannot create a Linux web app in an app service plan already hosting non-Linux web apps. Based on a current limitation, for the same resource group, you cannot mix Windows and Linux apps in the same region.
  * Deployment Slot : `Standard`/`Premeum` App Svc Plan
  * For Web App Svc, `Enable CD` :- Containerized WebApp -> Container Settings -> CD ON (Through `Webhook`)
  * **[App Service Environments](https://docs.microsoft.com/en-us/azure/app-service/environment/overview):** It provides a fully isolated and dedicated environment for securely running App Service apps at high scale
  * **[Azure Container Registry Tasks:](https://docs.microsoft.com/en-us/azure/container-registry/container-registry-tutorial-quick-task?)** is a feature in ACR that provides streamlined and efficient Docker container image builds in Azure.

### 3.1.4. Configure an App Service

* Web App Service -> Configure -> General Settings --> `Connection Strings` 
  * Connection string is encrypted, addressed and is transmit over an encrypted channel. This String details can be used in Local code to connect to Web App Svc.
  * Always On --> App doesnt go down in case of inactivity (0 requests)
  * Remote debugging & Local visual Studio Code version can be configured to connect
* Web App Service -> `Authentication` -> 
* Web App Service -> `Backup` --> # App Service Plan should be `Standard/ Higher`
* Web App Service -> `Scale up/down` at any point of time.
* Web App Service -> `App Service Logs` --> Enable what type of logs required & respective options to store logs in St Ac / on VMs / etc..
  * Application logging:
  * Web server logging:
  * Detailed Error Messages:
  * Failed request tracing:
  * Deployment logging: 

### 3.1.4.A  Azure Web Jobs:

* Web App Service -> Web Jobs -->
  * Create a script & zip the file
  * Add Job -> Upload the zip file -> Type: Continuous /Triggered -> 
    * Trigerred -> Schedule / Manual
  * Check the status of job & logs as well


### 3.1.5. Configure networking for an App Service

* Web App Service -> Networking --> 
  * `Vnet Config` : 
  * `Hybrid Config` : To connect to Onprem VMs 
  * `Azure Front Door + WAF` : Enable Firewall for Web App
  * `CDN` : Content Delivery Network for make data reachable to Customer based on Location.
  * [`Access Restrictions`]() : Block certain IPs to acess Webapp 
  
     <img src="https://user-images.githubusercontent.com/24938159/121761535-f77cbe80-cb4d-11eb-906c-c1d74e44ee43.png" width="400">

### 3.1.6. Create and manage deployment slots

* Feature is available with App svc Plan - `Standard` or Higher only
* We can have multiple slots (Dev/Stage/Prod) for diff App version. After testing, we can swap the slots to Production Env for Go Live.
* A new DNS name will be allocated to the deployment slot.

### 3.1.7. Implement Logic Apps:

* Azure Logic Apps is to create Workflows based on triggers.

  <img src="https://user-images.githubusercontent.com/24938159/121544268-36642480-ca27-11eb-8d61-0777c0abda20.png" width="600">

* **Connectors:**
* 
  <img src="https://user-images.githubusercontent.com/24938159/121544879-a96d9b00-ca27-11eb-8795-c0e141ead40a.png" width="600">

### 3.1.8. Implement Azure Functions

* Fun App is a service, that hosts the code & gets triggered as per the trigger defined/customized.

<img src="https://user-images.githubusercontent.com/24938159/121770829-54e23100-cb89-11eb-9388-a3d3095fd186.png" width="600">

* Invoke the Function:

<img src="https://user-images.githubusercontent.com/24938159/121770854-7a6f3a80-cb89-11eb-9fd4-5fb44f493e1b.png" width="500">

* Add Trigger & Test it.

<img src="https://user-images.githubusercontent.com/24938159/121771147-3c731600-cb8b-11eb-97d5-317c0abfcc5b.png" width="500">

* Fun App -> Add Trigger -> Code & test -> get url -> frame query & run.

#### [Durable Functions:](https://docs.microsoft.com/en-us/azure/azure-functions/durable/durable-functions-overview?tabs=csharp) 

* Durable Functions is an extension of Azure Functions that lets you write stateful functions in a serverless compute environment. 
* Function chaining:
   
   <img src="https://user-images.githubusercontent.com/24938159/121997001-379aa600-cdc7-11eb-89d8-82f02c03c7b8.png" width="450">

* Fan-out/fan-in:
 
   <img src="https://user-images.githubusercontent.com/24938159/121997084-5e58dc80-cdc7-11eb-8cc7-804fc4f96aa4.png" width="450">
   
* Async HTTP APIs:
   
   <img src="https://user-images.githubusercontent.com/24938159/121997229-a677ff00-cdc7-11eb-9a78-d9bc307771ab.png" width="450">

* Monitoring:

   <img src="https://user-images.githubusercontent.com/24938159/121997537-243c0a80-cdc8-11eb-9802-eeeeb5b42b72.png" width="450">

* Human interaction:

   <img src="https://user-images.githubusercontent.com/24938159/121997606-40d84280-cdc8-11eb-9dfc-1187f9205ab0.png" width="450">

* Aggregator (stateful entities)

   <img src="https://user-images.githubusercontent.com/24938159/121997758-7b41df80-cdc8-11eb-9f4c-33e85638ba41.png" width="450">

